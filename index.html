<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<title>Êï∏Â≠∏ÂØ∂ÂèØÂ§¢Â∞çÊà∞</title>
<link rel="manifest" href="manifest.json"/>
<meta name="theme-color" content="#4338ca"/>
<link rel="apple-touch-icon" href="icon-192.png"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;600;700;800;900&family=Press+Start+2P&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Noto Sans TC',sans-serif;overflow:hidden;height:100vh;height:100dvh;background:#111;-webkit-user-select:none;user-select:none}
button{font-family:inherit;cursor:pointer;-webkit-tap-highlight-color:transparent}
button:active{transform:scale(0.96)!important}
.scene-bg{position:absolute;inset:0;background-size:cover;background-position:center;image-rendering:pixelated;image-rendering:crisp-edges;z-index:0;}
@keyframes enemyHit{0%{transform:translate(0,0)}10%{transform:translate(8px,-4px)}20%{transform:translate(-6px,2px)}30%{transform:translate(4px,-2px)}50%{transform:translate(0,0)}100%{transform:translate(0,0)}}
@keyframes playerHit{0%{transform:translate(0,0) scaleX(-1)}10%{transform:translate(-8px,4px) scaleX(-1)}20%{transform:translate(6px,-2px) scaleX(-1)}50%{transform:translate(0,0) scaleX(-1)}100%{transform:translate(0,0) scaleX(-1)}}
@keyframes attackLunge{0%{transform:translate(0,0) scaleX(-1)}30%{transform:translate(60px,-40px) scaleX(-1)}50%{transform:translate(60px,-40px) scaleX(-1)}100%{transform:translate(0,0) scaleX(-1)}}
@keyframes enemyAttackLunge{0%{transform:translate(0,0)}30%{transform:translate(-60px,40px)}50%{transform:translate(-60px,40px)}100%{transform:translate(0,0)}}
@keyframes dmgPop{0%{transform:translateY(0) scale(0.5);opacity:0}20%{transform:translateY(-10px) scale(1.2);opacity:1}40%{transform:translateY(-20px) scale(1);opacity:1}100%{transform:translateY(-50px);opacity:0}}
@keyframes flashWhite{0%{filter:brightness(1)}15%{filter:brightness(3)}30%{filter:brightness(1)}45%{filter:brightness(2.5)}60%{filter:brightness(1)}}
@keyframes popIn{0%{transform:scale(0.8);opacity:0}100%{transform:scale(1);opacity:1}}
@keyframes fadeSlide{0%{transform:translateY(12px);opacity:0}100%{transform:translateY(0);opacity:1}}
@keyframes chargeGlow{0%{filter:drop-shadow(0 0 4px rgba(255,200,0,0))}50%{filter:drop-shadow(0 0 16px rgba(255,200,0,0.8))}100%{filter:drop-shadow(0 0 4px rgba(255,200,0,0))}}
@keyframes slideInBattle{0%{transform:translateX(120px);opacity:0}100%{transform:translateX(0);opacity:1}}
@keyframes slideInPlayer{0%{transform:translateX(-120px) scaleX(-1);opacity:0}100%{transform:translateX(0) scaleX(-1);opacity:1}}
@keyframes sparkle{0%{transform:scale(0) rotate(0deg);opacity:1}50%{transform:scale(1) rotate(180deg);opacity:1}100%{transform:scale(0) rotate(360deg);opacity:0}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes floatFlip{0%,100%{transform:translateY(0) scaleX(-1)}50%{transform:translateY(-6px) scaleX(-1)}}
@keyframes timerShrink{0%{width:100%}100%{width:0%}}
@keyframes timerPulse{0%{opacity:1}50%{opacity:0.5}100%{opacity:1}}
@keyframes timerUrgent{0%{background:#ef4444}50%{background:#fbbf24}100%{background:#ef4444}}
@keyframes fireballFly{0%{transform:translate(0,0) scale(0.3);opacity:0}15%{transform:translate(20px,-10px) scale(1);opacity:1}85%{transform:translate(160px,-80px) scale(1.2);opacity:1}100%{transform:translate(180px,-90px) scale(0.5);opacity:0}}
@keyframes fireTrail{0%{transform:translate(0,0) scale(0);opacity:0}10%{opacity:0.8;transform:scale(1)}100%{transform:translate(-30px,15px) scale(0);opacity:0}}
@keyframes lightningStrike{0%{clip-path:inset(100% 0 0 0);opacity:0}20%{clip-path:inset(0 0 0 0);opacity:1;filter:brightness(2)}40%{opacity:0.3}50%{opacity:1;filter:brightness(3)}70%{opacity:0.2}80%{opacity:1;filter:brightness(2)}100%{opacity:0;filter:brightness(1)}}
@keyframes lightningFlash{0%{background:transparent}10%{background:rgba(251,191,36,0.15)}20%{background:transparent}30%{background:rgba(251,191,36,0.1)}40%{background:transparent}100%{background:transparent}}
@keyframes waterWave{0%{transform:translateX(-100%) scaleY(0.3);opacity:0}20%{transform:translateX(-40%) scaleY(1);opacity:0.8}60%{transform:translateX(60%) scaleY(1.1);opacity:0.7}100%{transform:translateX(120%) scaleY(0.5);opacity:0}}
@keyframes waterDrop{0%{transform:translate(0,0) scale(0);opacity:0}20%{transform:translate(var(--dx),var(--dy)) scale(1);opacity:0.9}100%{transform:translate(var(--dx),calc(var(--dy) + 40px)) scale(0.3);opacity:0}}
@keyframes darkPulse{0%{transform:scale(0);opacity:0;background:rgba(88,28,135,0.8)}30%{transform:scale(1);opacity:0.9}60%{transform:scale(1.8);opacity:0.5;background:rgba(168,85,247,0.3)}100%{transform:scale(2.5);opacity:0}}
@keyframes darkScreenFlash{0%{background:transparent}15%{background:rgba(0,0,0,0.7)}30%{background:rgba(88,28,135,0.4)}50%{background:rgba(0,0,0,0.5)}70%{background:rgba(168,85,247,0.2)}100%{background:transparent}}
@keyframes enemyFireHit{0%{filter:brightness(1)}20%{filter:brightness(2) hue-rotate(-20deg)}40%{filter:brightness(1.3)}60%{filter:brightness(1.8) hue-rotate(-10deg)}100%{filter:brightness(1)}}
@keyframes enemyElecHit{0%{filter:brightness(1);transform:translate(0,0)}10%{filter:brightness(3);transform:translate(3px,0)}20%{filter:brightness(1.5);transform:translate(-3px,0)}30%{filter:brightness(2.5);transform:translate(2px,0)}40%{filter:brightness(1);transform:translate(-2px,0)}50%{filter:brightness(2);transform:translate(0,0)}100%{filter:brightness(1);transform:translate(0,0)}}
@keyframes enemyWaterHit{0%{filter:brightness(1);transform:translate(0,0)}20%{filter:brightness(1.5) saturate(2);transform:translate(8px,0)}40%{filter:brightness(1.2);transform:translate(-4px,0)}60%{filter:brightness(1.3) saturate(1.5);transform:translate(2px,0)}100%{filter:brightness(1);transform:translate(0,0)}}
@keyframes enemyDarkHit{0%{filter:brightness(1);transform:scale(1)}15%{filter:brightness(0.2);transform:scale(0.9)}30%{filter:brightness(3);transform:scale(1.15)}50%{filter:brightness(0.5);transform:scale(0.95)}70%{filter:brightness(2);transform:scale(1.05)}100%{filter:brightness(1);transform:scale(1)}}
@keyframes evolveFlash{0%{opacity:0}8%{opacity:0.95}30%{opacity:0.3}45%{opacity:0.7}100%{opacity:0}}
@keyframes evolveSpin{from{transform:rotate(0deg) translateX(var(--orbit)) rotate(0deg)}to{transform:rotate(360deg) translateX(var(--orbit)) rotate(-360deg)}}
@keyframes evolveGlow{0%,100%{filter:drop-shadow(0 0 8px rgba(99,102,241,0.3))}50%{filter:drop-shadow(0 0 30px rgba(99,102,241,0.8)) drop-shadow(0 0 60px rgba(168,85,247,0.4))}}
@keyframes growIn{0%{transform:scale(0.2);opacity:0;filter:brightness(3)}35%{transform:scale(1.2);filter:brightness(1.5)}60%{transform:scale(0.95)}100%{transform:scale(1);opacity:1;filter:brightness(1)}}
@keyframes colorBurst{0%{transform:scale(0);opacity:0.8}100%{transform:scale(4);opacity:0}}
@keyframes bgShimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useRef}=React;

const SPRITE_IMGS={slime:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAADIUlEQVR4nO2av4sTQRTHv4oIkmbEwtMTDk8Q9AqLSBa0uyqayubAxsq/IoV3sTjwXziut0wVL/9ADnaJRZoED/TgYDUW0XQHQYiFzDI7mZ28mZ2dtdgvpNjdefPeZ9782skClSpVqlSp0oq2B2++l+H3ahlOAeBX78udMvyWAsyzW0aWS8swAOzt7F749lkqMOA/y6UD+86yd+CyZmeu0jMM+G2E/wLYp7wC80zK43ZvZ/fCV5a9ALN2sGTtYEkpV3QsV4qoVA782dsXZNvT45PU9fwwdBqj08pYO1iawFF1enziDNxJJVmgjRsPSfbR5RmpnAvwXMYqUBGyudF4lWXbn0Zd1X0KfB5wa+CX3w5S45QKKisP+KftA+P4rWZpV7C68pThIMdBkTGwDta1ioA2AvYJa+LDBPoatSB1U9CfRt39jdcr90N8VXZdcQyr7DrTj+T4KBMZedCrWlHV+qqguURoebLS2bXOO6QYKZMYqUtTs5sV9ObmEwBAgAfd/jTqUmG5Xe/+PsU9Kc5ce2nqhmE+nyfBm8jWTqfcLw8cWsySGGSttgXgX/ByORM7apbXycnbkphpHnSttpUELT9TydbOVGTg4SBy5rQIUeMjL0sq9cbNenIxDoFW8DlPfXpnYb2HZnLZety38kXO8GIyS7ViClYIKo5HAADGWOoRYwxxPELrvIPo8iz58SVHa3d0tOJL9D8cRFhMZiQOErC4oA8HkRo2iSRMnjHGkp+JRDsVbOJq3KyLSaBsPIwmLWor8mzJ97I2EHKWTUWNCzAAFlvv9u/3meOHj604HuHPh3uI45EWNrEToFN2mrEqxkF9PzZ+n2TtYHn90S0AwM+b71LdTQxO7GpPnzfI9WfZycOIwy4mM6PDAKsDABFalgxHBdeVy1pyTGGBHCceOuh1EoFs13cbWMDBmRYA2ILbiE9Q3s+0RPkAzwvK5fxcGnAL7gqUy0UlK99qsHaQ+p/IpAHkNXV+GN5VFPtBrlCSLbDRBylyA+iUAaiTEbwNcClf36wRGbr6f5gg6/FTkArv0rLK6OLeJy2KXDSE8970F7k4fsyuo2UiAAAAAElFTkSuQmCC",fire:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAAD+0lEQVR4nMWaPUtbYRTH/yklKW2XDhFs4iAOhToEtNCl4KT9AgaXQKFDBwVBKw5FOpTSQayCoINDQchS0i9gNqGLg0KGCg7SRSuYoXYQGgdvBz23zz153u/NvX8IyfN6zu+ec899USAj7ZTLQRZ272RhlGCzgM4EGABefPidlel0tVMuB5dfHoSftKOcaoRVcGlCp57SlMr5wf5IOy2lBixGkWDpm4/3UqkAE4wqmtSfBnRqEeapfOfJm0g7rdTuObAsagRL36b5ScoIHGyOrPhuzlNZPGdF8SjHgTb5awTOTR8sxIHmqcqjyttxUjvYHFnJTR8s6OZYp7QrNI+SKrqqcdco2/qX89nQdBRlVTk/2C89Z0nXR1u4+nkWtr+/fwQAeHlyovXRxS/As2i5RtsUXdd5vn4ADsD86KmMqa65uujKxk0FjNu3iS7gGGETtCqVXSTOV0H7wgLAXSdvJCLjOqOm6Irzro+2jLbiyLpo2Rhufjp/Gye6ongBm3jX91k2zyW6QAIRZkYX8Prmx3KxGAB/AACztZr1Xuv1+u2v+1hst28DcglMnwCIH2WvCJNhfnRvIN0ATaID8B9ebd9G3sBcy8ViwEFzQ0PW64PjY+34er3eBe2j2BtwUBdIlXTwccFjAf+dmwsvF0mAcunA762tefnuDayDzc/MdM2/2tgw7ilb15mfV873gfa6taTiBNjB6vpN44XVVSs/bOUMLCtOJJXTpVJFO25ap4KerdWcoZ2BXWEB4MfTPiW07TodtIusgHfK5YA+u41GZIwXllKpEjoJABfj4wCizsvku2630Yj4Z2IxAtMmY9UqxqrV0IgoWTW9GB8PnXaRyzryQ/TNBK0FFmFJKmgX5Z89HKWP7x4iLPdNB22MsLihro9r+PBc205inY9vib2mpevl6Wkr7Bs+PA8/4djedjSqt23TOt312EVGYFnqqtJZBk2SwpIk0OI6FayLbyTjnQo/j2XnDpf0EqKCFfX81T7v0kWW+0Jt3Ys/q1szVRGQQRemKt6FSKXO11bXgVBF0vSW0/lelO5sKoVC2CeCF6Yqo5FI7W3ftOnbs58iLYK2Oh0A3c/KOjm/8Vhst3P8ds4mzeNKFVHXR0WvKr3Ybufo6HKnmpNL++H5qqjIrv3NgYEuW61Ox+u52PuypILuEqUlL0iu/YJ8YYGY12GC5uDNySWlsy7i+5CtzN54iJIVMwCY+PbRuWrLQAH381WmxICB6AM5Bwf08LKsEDMnCVggGWDp2/blYvEX/ZbBq8QgHyumnSn6jfIFdvqTgghvkgZSJSd4H2D/v5/0TtbQmf2vZVbyAfY+f3qknqc0VxYpnnrRslESByLxbPoHPLkx4yGgHqsAAAAASUVORK5CYII=",ghost:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAADRklEQVR4nO2ZMWsbMRTH9epCxiydnJChnhqKSb1kKRQ8dM/eLCb5DoVC7QbyLYIXJ3P3DoaAly62McWenCFQT1kyejjUoX1X3fOT9O6sOzvt/cFg6Z7evd89naSTlCpVqtRTFhRxk7O9ay21vfr5IdeYcnFOAas7h+K2i+U0UQ79AII5MyEpYLNVF/vpdyeJsvkAQsCv7YADbbbqavfA3/bx3m+DDyAUONtQa/1RKTUAgIGrMcIi6ElHnkkqHzwFzwqdqZEE9Oi08srWftyLZrZreYOnBjZhua7rAqWygUu7ehboZ1JDpcLCuuwl73+zVY97WJppLxWwUuFgfe3SQlNprc+01g1aLwY+27vWCLtNQmiaZQC4AoAhtX8ucYqwLo170ezotEKrvVm3vcfU1+1l5PSD0L73WQSMsmWXAUUhDAvOwdp8vfv0u54Db7bqKwsWm7xd2pZdHEm5ANu1kWrXRmZVAmzci2ZSWOoLwTlxXZtK/A5z2bVlY7GcqsVyugJtA03ri4OWji2pR2lOZjDn+zfxfwa6UF+cMgPjU8YgzvdvEgGizEBtWcT6NL5cXdulVINWaElWVOtKa/1eKTUHgLlSGwAuAtIUAHwzy4kurbV+q7UWrHGerhLAADAAgEw5sC1M0ux25OGLKvOghQuAL/M31oCwjDa21VJIXz4FmZZooPij14r2xWktYPMpc8GYdb6MhPTl0tqj9O1lFM+JtgxIAwzpy6Yg0xIGQRcDWYIL6YtT0HlYEhT3VcOtg0MBUjmB/+wYVNu10WLdG5mg5pZrdecwvlbE5oITGACGko9/n+hO40Plx/f44lIdK/UXPG/oINOSS05Yo4zXpR/yWZU7sCkK66vPQ4UCb4NSAWN32z1Y/ZnXTTtTL6LXx5xfWu/y57qvRGJgqVNqh8cwOPBROCzbjm2y3tcm7xEFd9ZLN+If75NHH5zd1459WkIhrMSfzU4p99GLd+FBG39+ObTuCpq21O6kU48D5M6PuZMGlz9XjC5tZIvn4q4hAslDqUfpi7sG0Pel350kIDZp51PmaQn3pnx7VJuys6mchyXiuts22bmUOcP97iQedbfRzqb/rkuvJemUsik7TmWGS/1j+gVdSRpnvwyqIwAAAABJRU5ErkJggg==",dragon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAAEDklEQVR4nO2ZPWhTURTH/5FWBBU6NBWFSmmRZszkkC7SmqlYJ0mJUCI4tXTrUHAWO7hJnQotgZRmNKWDxIhLO3TKmCAGMaDYdiioWNLCc4jn5ebmfr6PxKp/CHnv5d7zzu+dc8+97wb4r39EwzMVp9c+hCkh398KzXJd4H/M5BpON8C7dY9MrqG+DzUK26Fu2DfmyOQazrPiaWjgYT5Usk3+8793pDQAlPI1VA8cjA9FMJUaPTdje3im4kylRjE+FEH1wEEpX+toEzHpDAAvX3xAvRCTtvfjVFB25xfHAEBpt09moF6IRUqoOPjt3PziGKqphhOUg0GJD4zuIQpTWqagUpyco2+v4mFNpG0pM+olHUW2grJjaksb4XohFqEixsprtHknbaPsNwDSMSwSVe7qgYONhxetPCVHRZpKjaKEimMS5XohFtkoNI8zuYZD/pjKOo1sQQEgmsg6lwZvQwYMNKfCk6N9HO7NWdvP5MyLaWjVNprIuo99emHWuN/O6pZ77AVep0ANEqQNoE70AIKCDww4msg6PKhJQTIdfzurW4FA+zbAg/qZW03g/YL7AmZh/S4iWOnA/UBbrbRYhQVrYm96YbatKNrIE3CYsKSwoD3Nqaoxu3y3cy2z8ubM2L6o/6PNU2l72/T2NMmz5ywwOXv27hYAoO/Oe/c3E2hVfxW0zWLIenlIx7RqImDeWdL3pyMYKBYBqKFN+vPQ7Au+6cuHcgOAvyZbGq6n+91j3uHXD44xEY8rodk01vWXRVq0u6HdAGAh+cbRRNYp5VvnIvjjZBLACK48+eg6CwC75TImkknXaZls+7OQonW4iKcNmIW0iTAvctSrTPuz/pTynT77jjBgBqzS8c9w9gN9R9iPJuJx7JbLbefd7E8S8RgD6t5pqXA1x2GnBopFPH8rn1qWJvX9VQXL9F3a89KSFzkjKkw6WADu77L+qnnYRtYRBtTFi52iSDpYVhRpVipYqtSmEbYasybQ1662jgcv21hv19GP1vHXb+I2trCAj5QWTfSs/MCa9NfdXyYr4MO9ucjJ0b7vm/qVbsGhkqcIy6DX0/1Yudf8AK3xuDTZ735srpMdti7wsLay2pcGmlHm30NdJ9Lj7jV2DAYhWTbZ7nx4ijCf2qSb96sAgOXt9qpKVZqv1rLr1H95+xSba2JQr3vYnosWQYvAN9dqHWlN4tNXdX1zrYZPr5pZQ990z67vaQGtdNKNpaDSm+7Ts11LVjSuaZ4mpR/bv3DwaRwEKCmUfx6ATnBADS8aq2zm9Pqfh+u6BtFE9jN7LnoAvPihcbg3d8PAly8GbVzZAGshZeLhVTKElEkLbwLsGbSHkoIH9np4XtSVlO6iAklpkf4k+NCKlqnCeBhWUCr9Anixp0vvBPPNAAAAAElFTkSuQmCC",boss:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAAD8UlEQVR4nO2aLWzbQBTH/85qkGRSSDewgG5qpHZD0aQho5BGlcqiotKpKLhkYCotbVA0OlgWkpKgoElTyLRVSrUOpKigBnaB1Xpge87lfGff+Suptr8U2bmPd+93777sBGA06JR95KxBp+x7o4Z/f33ie6OGX1SbdF/iM4tyoghR5yoVygOajS598m6Ltx2KMGn39LiQIZ6HBp2yv3t6LMxb4xP2zu6MAWZ+u9v/A42PPqXn7GdqUYB2T4/xcNHHsDcL+S2NMIl6Km20B52y3+7WhXntbj0T+8DcX5mEwHtnd8awN8PDRR9kJAunAKC0dRj5PYmoMwlWFl1AMKRlKm0dot3tY4CZ9hCPii6p3a1jgJmva5fqqnacdEjzUQYIur7Q2LIkg42KLqAwh0MV/kKrRoKNriwKlK4zbfbO7gydyJIihzS7Ype2DvHkxdFKrdRma2oARwCA++sTPy66AJALgGnWFqJUqawr13Xdm4Xvnmdn6qPyoqUiAuUBq9VqYpuuCx/IDjwTYB40DaCsblbgqYCzBJWJt5kWPFilvVHjvU5F06z5lco6KpV1VKvVXGBZURvUJr9ORIllM/gEszX9FFW5iKjGyXEcAPMFLiraPJvBZujALgOUl+M4ytDEpjwPVGB/fXZDaRsHFdUmEtlRhSZpLVpxsMPeTJBe14LWtUP+8Pu3TEoRpgVKBdayLTz9cAUAQVq7qwadxg5FOi7KJQDwRo23sgJxqyE5adnWgpPkoGVbGPZmwmGahx2Zv8RYopsoaFl0ZcNPpChns7BDW5ZILGPJbE2/AgBdk8iyLQDAeDLBcP927tz+LcaTSZBflB1eLOMamxAqGDN3ZWKdTSNdO/MFDD4/l4lR+3n4sSsT4HFtDACwms1QntVsBvlF2YmS6JeHHdXKGwcV8O+qWGfZ+6gtJSs7vEQshqyA2Zqeq85hfv8kUUSS7sNJ7NB+7J4/a7MsdB/apL1RY4cK6Cxasq1FJyJZ2GEPICwLKfJUortKL+MszSvuxBV7tEy6NS1DKsfLTN9piRxIqrw6eAHYGzW2zdb0B1+InkRkTqQBk0lmM8oH0RMTz8S+4tlmr0G6ZHg4jhN8rt69Cj4AFq5ZpzuOg29vnks7hPVXxBQAUy+IIux5tuG6NwuQqyDWH9HcFTGVRAV09fLLz4VrUekq4pmUj5aqvx7ww7GodFX//rmHB+WXeLXa5sr/38O2L2N5lCOsYmyZUvVPa0ivKrSOX4kBVmGIJwmAboVtUWKttvldt+Gksu3L15IspS1VBVgIqaI0HREBpiIpfBRwYtAVUgj8/z4s0GOMdKIhLdIqw2e2aOkozw5J9GDD6zeRZOALlvlI7gAAAABJRU5ErkJggg==",player0:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAAC8ElEQVR4nO2YQUsbQRTH/w2VFixlr20OBUmJhVQFSeJFLx71Igilp/bkF2gPHkpKc+qh/QKezFHxaG4VQS8mZaHagoqSW9prEAstgaSHMuvuZGZ2d+btLMj+QeLOvp33fjPvze4MkClTpkyZMo2ov18YpuE3l4bTNJUB21B/vzDMFddSSetshm+7UgHOFdcCv1Z923bI163tOs5S+rbLOjBft7br2CqwrF5t1rE14HKpoYQKu0+lO0l27odYfv0i1H53c8v7/+uPV4nERt4pg4wCGCY2AJTwpMDlUmPIgz6dkFfNRWcQqd/dzS0yaDLgD5/+eOnLQ04UxuZ5+85l/9B/HQX+/dv7xvGSAMtgRaC8/OA2oI1XaRNY3k6V/iJ/OjICVqWxrpKG1o7S1nuT2r92PfCjzM/My5WxkWda3yFdvET29c9/lTHo1LPWDItG17/giIIHgOpzeAtU57J/qIIFgNqbe7HjCBPpp+VFZyANPp+fBvAf2r8yh9mHQccVKbAquF6v50EwSBksb08JncjmIZ+f9oIFgPHxJwCCECb2Jrqr++DBzgkWVqdQm/w26zU2ASxVXXbJAhdJ9JEhtW+2ZmuTN5f1sxn3YOckftAwnOEALFOzNdpmoO7Gxkh/Qr8RpQ385d1A6pQF6ThOoJ2/5sXf/729LfWh8q+SFnCcnYvjON4fAHS7x977lf12u8dSe6o4mLRnuLJ+7kpvLlVdPwSTH5ZJBO3vR8u/QkY7j3KpMWx/LAZSq3424wLiV4nqy0llz9dsZf3c1d0fG28Py6XG8OGDZyPtC6tTAG5W86jy24tW4qvrU6PDAJL9sAzaryjQYa8aU1iA8MQjCrSJKGCBBM60AIAS/Or6FADdQR75qeXiXJt8n7x3VCGLU/vTUqBHhH3J+v5l2pHpyAkhF+faP0XtLD1FkpXB3lHlseQRLXgTYOWM8tCKwE2eiQ2dGLAlxQY22S0Z15OhrKc0LxsznvqiFSaTQUgkg/4BwCQu2gRAzFAAAAAASUVORK5CYII=",player1:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAADr0lEQVR4nOWYPUscURSG351EEzCEqYS4ARshHxgtgh+VILYpBUtT5Q8kpExISkn+gJWWgqWtCFausoVGVgUbwTWQSkQhWdFJkZzxzN37PXfd2eSFxd2ZOfeeZ8655x4v8L/rcm0gabcPISXyRLKb/wq0jKckXgCA6MkbXB/Mo2vysHS7LobT5dpAQhxckQyW/nZqpAkWuOEhlcQHSBF6K9f4MdZpkSYW8p/fuz6Y/7OGuyYPSzz0EXor9LeTIs1hgRsOAOkSTYsWQfOHyKgToEVYUoTeCs/SSDQU04CMxJQvmmSwQDNPBpiirIIuapQv1wYSFaxYg5oirIUuYGrLCi4ghwUkwIAaumjrWbVudbuLFBgoPrQPLKABBooL7QsLGIDFwbKG7YHWwdrYW3VQmVbtbwdzp+9927uvq5O5hHdUNl2htdME7QM6MrhonQVbu7PO41+dzCW2LXDLosQhX72esbZbWVhKv/vAmxR0QIJ0ATSJXkAo+CCDjAwuJjLI/sfm4Y+O7WveysJSbvDcwCKsCPn0efdLle1+rVHlv23g80LnAv705WfqoQuoKB/wj+/ue/luvQ+LCgUre95mKfD5XeQFHBJWZdcqaOe0ECcRHZud6W6yqXyD1UvYrzWqMvvPX39p7VzS2ynCpgZC5iwAjL1AVXqDSQULAB/e3svlF5cTsG5/5c7yiJTLwwD00CKszF4H7bLvWwOr3qKsonLnTk9PU6dF7dcaVbFCu9jb+CfKKvenxjczg01MDykdLJeHUa9vAwB6evrT6xcXRwCAxaVG0/g8uiZ7cT2vL+9kfq9ujGqZjBEm2InpoRRUnIQ7S45yZ/k9nVztyQ/umxgcUVpgDksyQbvKpbXk4rAkG2hjhMX0VV2z1dFxkvnkkY9v3p0WF60rWntxHGfux3GMen1buZ/mtXeREViWujbpHMdx+vGRjb2Pb1pgqnh8ENnaAZqjxGUTHVd7WS2h77pK7bUtiZNyyRoEl1S0tVdF0rQteZ1PPXzwLHNNVSjWl3e8CpzOTgQ9O99z+v/YuWht7c6Wzs73tE7wa67bl84uLyyQ4wBAFmkSjw53Uhdt1XOqF+YDC+Q88dBBt1K+sECgMy0AuA1wWkp5zrRyNx40ubiuQysELBDwXNrUtIeQacux0d0cto/yTh5gzu+uA/i8MSXo1PjmieqeTcrr6sDqxmifxtQa3AXYKqIyaIOzIe2N4MGB26ygwKQigrckpUUVAfxWipaNQr4MZyidfgO67WhMtPb82QAAAABJRU5ErkJggg==",player2:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAyCAYAAAAA9rgCAAAEcUlEQVR4nN2YTUsbURSGz6Q2ChFplxFBhUBVUjfiRzdCUbpyISK4q5JF/4DSTUGJ4EbsH3BRTHeCSBcupBgCrqLSjZXaQEEF0WVLSCA16HRRT3rnzrmfM6m2LwSSmXvuvM89Z86dDMCtyu9iLoSoai4hnK+aS7jfR0drH9N4GyFfhDpYb5WWOuDRxMQe/hZBhyWWK8IfCGNlq7mEG3nyipwLj/3Y3By0ibfxgt/L72JuRDXIVsWXH6G01GGdvaDxADRHhM1utDNeO3F9sWx1oWou4apKtuX9C0/M450dxyReR6x/lqshlio7onv3+mLZfdD62qHOqUSVLJYqgBe6Wjh1Hz7/5rmOrORVkiUrAgAQS5UddhXQlCqYFwtko6DxAF6/7FzRzjjEUmWndg/zKyyaREd8yTa/OZXC8A2KiteRzCfy+SBlQbLyVmXnprAKQc/bJoX17evSMijbRgYAUhid8zKZJInclirbabgprBpPfhcS+bkprEJlO+07TgLHUmXn6uTy3kPLYK9OLiGWKvuqlQQG8ELz4LZbVdjifaBXESyAADi9UhkH+AONk1EXuWuhH/SHsMjAy2eeHbgw1/QB4PczaLQzLu2SYf+7oaS6PgWLDChygvRKZZwfaKL+ZMYDPzYzpR27tbbu+X1wNG1VUSKGUMsTQU0AVcIFsAXnFcok/cmMy0O2t+lNfXaufydsra0HBg8MnF6p1BzzkF090T5R3NcvV5/4Y7rwC3NN1r6F25Koy6H6kxkXYdvbHA9sV0+0TwYrGsPPI/Hm8n1C17t0WxIFsiVsklVK1Hgd6LGZKV9zBFB7J4Gxu1FdLkxYWZwttMw7gOE9zDcnCnjwKfjuzb3PoFwIvKenp6K+c4tvf0pjTZqZ8B6mpNpuKFjZcZQMFgBgfrYxkC9W2sCyJgEgzgxmRwStyizGq6BV/lDaJc1uP6za2xxhZkafHQAAwPBkb80wlje7LZnEy8pbZ7vSyrBs9VizrBk0CwCwu3HoybQIVidelmmdLDeoBugKDbFGWe1uHMIi9AoNB43XlVHT+h/kA1Y9YYWhs3O39qmnKJYINYAauLtxqHWR4cleo+NhxfP+RCweYNVTCiWqmfDm8Pf8bKOvywaNF0nEorUt9SczbktzN2kGpdo2VGaDxGN2i6Vj5ROXVtM6OJp2iqVjz+S8ZNuGTmZs401gAQwePNgsA6gzzUq3DE3j2cUvlo6hpbkbsvkBZ2Ro383mB0g24z8POtB/QxQsLwraeB/G0uYvKjNkI5O5ETabH3BYyJGhfd++Z/yqBB/f+BVls80asqkCUbxsEfhsisra6t2QCJo3aQpOjVdViuheFcn6ZZgKWibdrInENijT2MBvLflGVm/pbj8ihfZeGsAu27rCZnnn76VRVEcMWzYlzMv2/3BcPaQuoq57aTKByYopIUeG9i9E59j9WyTZLZHND7QqJ9CA1wE2yiYFrWk2lPhbCcFDB74nCgSM+hfAQylpSvcJvm5NS1f1WAwjKJl+ARkt1RYOV3q+AAAAAElFTkSuQmCC"};
function slimeSVG(c1,c2){return '<image href="'+SPRITE_IMGS.slime+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function fireLizardSVG(c1,c2){return '<image href="'+SPRITE_IMGS.fire+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function ghostSVG(c1,c2){return '<image href="'+SPRITE_IMGS.ghost+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function dragonSVG(c1,c2){return '<image href="'+SPRITE_IMGS.dragon+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function darkLordSVG(c1,c2){return '<image href="'+SPRITE_IMGS.boss+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function pStage0(c1,c2){return '<image href="'+SPRITE_IMGS.player0+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function pStage1(c1,c2){return '<image href="'+SPRITE_IMGS.player1+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

function pStage2(c1,c2){return '<image href="'+SPRITE_IMGS.player2+'" x="0" y="0" width="120" height="100" image-rendering="pixelated" style="image-rendering:pixelated;image-rendering:crisp-edges"/>';}

const MONSTERS=[
  {id:"slime",name:"Âè≤ËêäÂßÜ",hp:40,atk:6,c1:"#4ade80",c2:"#16a34a",svgFn:slimeSVG,drops:["üç¨","üß™"],mType:"grass",typeIcon:"üåø",typeName:"Ëçâ"},
  {id:"fire",name:"ÁÅ´ÁÑ∞Ëú•",hp:55,atk:9,c1:"#f87171",c2:"#b91c1c",svgFn:fireLizardSVG,drops:["üî•","üíé"],mType:"fire",typeIcon:"üî•",typeName:"ÁÅ´"},
  {id:"ghost",name:"ÂπΩÈùàÈ≠î",hp:50,atk:8,c1:"#c084fc",c2:"#7e22ce",svgFn:ghostSVG,drops:["üëª","‚≠ê"],mType:"ghost",typeIcon:"üëª",typeName:"Èùà"},
  {id:"dragon",name:"ÈãºÈêµÈæç",hp:80,atk:12,c1:"#60a5fa",c2:"#1d4ed8",svgFn:dragonSVG,drops:["üêâ","üëë"],mType:"steel",typeIcon:"üõ°Ô∏è",typeName:"Èãº"},
  {id:"boss",name:"ÊöóÈªëÈ≠îÁéã",hp:120,atk:15,c1:"#fbbf24",c2:"#b45309",svgFn:darkLordSVG,drops:["üëë","üèÜ"],mType:"dark",typeIcon:"üíÄ",typeName:"Êöó"},
];
// Type effectiveness: TYPE_EFF[moveType][monsterType] = multiplier
// 1.5 = super effective, 0.6 = not very effective, 1.0 = neutral
const TYPE_EFF={
  fire:   {grass:1.5, fire:0.6, ghost:1.5, steel:0.6, dark:1.0},
  electric:{grass:1.0, fire:1.0, ghost:0.6, steel:1.5, dark:1.0},
  water:  {grass:0.6, fire:1.5, ghost:1.0, steel:1.0, dark:1.5},
  dark:   {grass:1.0, fire:1.0, ghost:1.5, steel:0.6, dark:0.6},
};
function getEff(moveType,monType){return(TYPE_EFF[moveType]&&TYPE_EFF[moveType][monType])||1.0;}


// Pixel art background images (base64-encoded PNG, 120x200px)
const BG_IMGS={
  grass:"data:image/png;base64,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",
  fire:"data:image/png;base64,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",
  ghost:"data:image/png;base64,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",
  steel:"data:image/png;base64,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",
  dark:"data:image/png;base64,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",
};
// Battle scene themes per monster type
const SCENES={
  grass:{
    bgImg:BG_IMGS.grass,
    sky:"linear-gradient(180deg,#87ceeb 0%,#a8d8ea 30%,#b4e4b4 60%,#90d890 100%)",
    ground:"linear-gradient(180deg,transparent,rgba(34,197,94,0.08) 40%,rgba(34,197,94,0.15))",
    platform1:"rgba(34,197,94,0.25)",platform2:"rgba(34,197,94,0.2)",
    deco:()=><>{[...Array(5)].map((_,i)=><div key={`g${i}`} style={{position:"absolute",bottom:`${8+i*3}%`,left:`${5+i*18}%`,fontSize:14+Math.random()*8,opacity:0.25}}>{"üåøüå±üçÄüåºüåª"[i]}</div>)}<div style={{position:"absolute",top:"5%",right:"30%",fontSize:16,opacity:0.15}}>‚òÅÔ∏è</div><div style={{position:"absolute",top:"12%",left:"20%",fontSize:22,opacity:0.1}}>‚òÅÔ∏è</div></>
  },
  fire:{
    bgImg:BG_IMGS.fire,
    sky:"linear-gradient(180deg,#7c2d12 0%,#c2410c 25%,#ea580c 50%,#92400e 80%,#451a03 100%)",
    ground:"linear-gradient(180deg,transparent,rgba(234,88,12,0.1) 40%,rgba(154,52,18,0.25))",
    platform1:"rgba(234,88,12,0.3)",platform2:"rgba(234,88,12,0.2)",
    deco:()=><>{[...Array(4)].map((_,i)=><div key={`f${i}`} style={{position:"absolute",bottom:`${5+i*4}%`,left:`${10+i*22}%`,fontSize:12+Math.random()*10,opacity:0.2+Math.random()*0.15,animation:`sparkle ${2+i*0.5}s ease ${i*0.3}s infinite`}}>{"üî•üåãüî•üí®"[i]}</div>)}<div style={{position:"absolute",top:"8%",left:"15%",width:60,height:60,background:"radial-gradient(circle,rgba(251,146,60,0.15),transparent)",borderRadius:"50%"}}/>
    <div style={{position:"absolute",bottom:"15%",right:"5%",width:40,height:50,opacity:0.12}}><svg viewBox="0 0 40 50"><polygon points="10,50 20,10 30,50" fill="#ef4444" opacity="0.5"/><polygon points="5,50 15,20 25,50" fill="#b91c1c" opacity="0.3"/></svg></div></>
  },
  ghost:{
    bgImg:BG_IMGS.ghost,
    sky:"linear-gradient(180deg,#1e1b4b 0%,#312e81 25%,#3730a3 50%,#1e1b4b 80%,#0f0b2e 100%)",
    ground:"linear-gradient(180deg,transparent,rgba(99,102,241,0.05) 40%,rgba(67,56,202,0.12))",
    platform1:"rgba(99,102,241,0.15)",platform2:"rgba(99,102,241,0.1)",
    deco:()=><>{[...Array(6)].map((_,i)=><div key={`gh${i}`} style={{position:"absolute",top:`${10+Math.random()*50}%`,left:`${5+i*16}%`,fontSize:8+Math.random()*6,opacity:0.08+Math.random()*0.1,animation:`float ${3+i*0.4}s ease ${i*0.5}s infinite`}}>{"üëª‚ú®üåô‚≠êüí´üîÆ"[i]}</div>)}<div style={{position:"absolute",top:"5%",right:"25%",width:30,height:30,background:"radial-gradient(circle,rgba(250,250,210,0.12),transparent)",borderRadius:"50%"}}/>
    <div style={{position:"absolute",bottom:"20%",left:"8%",width:80,height:30,background:"rgba(139,92,246,0.06)",borderRadius:"50%",filter:"blur(8px)"}}/>
    <div style={{position:"absolute",top:"20%",left:"60%",width:50,height:50,background:"rgba(139,92,246,0.04)",borderRadius:"50%",filter:"blur(12px)"}}/></>
  },
  steel:{
    bgImg:BG_IMGS.steel,
    sky:"linear-gradient(180deg,#64748b 0%,#94a3b8 20%,#cbd5e1 45%,#94a3b8 70%,#6b7280 100%)",
    ground:"linear-gradient(180deg,transparent,rgba(100,116,139,0.1) 40%,rgba(75,85,99,0.2))",
    platform1:"rgba(100,116,139,0.3)",platform2:"rgba(100,116,139,0.2)",
    deco:()=><>{/* Metal girders */}
    <div style={{position:"absolute",bottom:"5%",left:"2%",width:"96%",height:8,background:"linear-gradient(90deg,#6b7280,#9ca3af,#6b7280)",opacity:0.15,borderRadius:2}}/>
    <div style={{position:"absolute",bottom:"5%",left:"10%",width:4,height:"30%",background:"linear-gradient(180deg,transparent,#6b7280)",opacity:0.1}}/>
    <div style={{position:"absolute",bottom:"5%",right:"15%",width:4,height:"25%",background:"linear-gradient(180deg,transparent,#6b7280)",opacity:0.1}}/>
    {[...Array(3)].map((_,i)=><div key={`s${i}`} style={{position:"absolute",top:`${12+i*15}%`,left:`${20+i*25}%`,fontSize:10,opacity:0.08}}>{"‚öôÔ∏èüî©üõ°Ô∏è"[i]}</div>)}
    <div style={{position:"absolute",top:"8%",right:"20%",width:80,height:80,border:"2px solid rgba(148,163,184,0.08)",borderRadius:"50%"}}/>
    <div style={{position:"absolute",top:"6%",left:"10%",width:50,height:3,background:"rgba(148,163,184,0.1)",transform:"rotate(-15deg)"}}/></>
  },
  dark:{
    bgImg:BG_IMGS.dark,
    sky:"linear-gradient(180deg,#030712 0%,#0a0415 20%,#1a0a2e 45%,#0f0520 70%,#030712 100%)",
    ground:"linear-gradient(180deg,transparent,rgba(88,28,135,0.06) 40%,rgba(30,10,60,0.2))",
    platform1:"rgba(88,28,135,0.2)",platform2:"rgba(88,28,135,0.15)",
    deco:()=><>{[...Array(8)].map((_,i)=><div key={`d${i}`} style={{position:"absolute",top:`${5+Math.random()*60}%`,left:`${Math.random()*90}%`,width:2+Math.random()*3,height:2+Math.random()*3,background:"white",borderRadius:"50%",opacity:0.1+Math.random()*0.2,animation:`sparkle ${2+Math.random()*3}s ease ${Math.random()*2}s infinite`}}/>)}
    <div style={{position:"absolute",top:"10%",left:"50%",width:100,height:100,background:"radial-gradient(circle,rgba(168,85,247,0.06),transparent)",borderRadius:"50%"}}/>
    <div style={{position:"absolute",bottom:"25%",left:"5%",width:60,height:60,background:"radial-gradient(circle,rgba(139,92,246,0.04),transparent)",borderRadius:"50%"}}/>
    {[0,1,2].map(i=><div key={`p${i}`} style={{position:"absolute",bottom:`${10+i*8}%`,left:`${15+i*30}%`,width:30+i*10,height:2,background:`rgba(168,85,247,${0.04+i*0.02})`,filter:"blur(3px)"}}/>)}</>
  }
};
const PLAYER={c1:"#818cf8",c2:"#4338ca",stages:[
  {name:"Êï∏Êï∏Áç∏",emoji:"üê£",svgFn:pStage0},
  {name:"ÁÆóË°ìÁç∏",emoji:"üê•",svgFn:pStage1},
  {name:"Êï∏Â≠∏Áéã",emoji:"ü¶Ö",svgFn:pStage2},
]};
const MOVES_BASE=[
  {name:"ÁÅ´Ëä±ÂΩà",icon:"üî•",type:"fire",desc:"Á∞°ÂñÆ‰πòÊ≥ï",basePower:12,range:[2,5],ops:["√ó"],color:"#ef4444",bg:"#fef2f2"},
  {name:"Èõ∑ÈõªÊìä",icon:"‚ö°",type:"electric",desc:"‰πù‰πù‰πòÊ≥ï",basePower:20,range:[2,9],ops:["√ó"],color:"#f59e0b",bg:"#fffbeb"},
  {name:"Ê∞¥ÊµÅÊ≥¢",icon:"üåä",type:"water",desc:"Âü∫Á§éÈô§Ê≥ï",basePower:24,range:[2,9],ops:["√∑"],color:"#3b82f6",bg:"#eff6ff"},
  {name:"ÁµÇÊ•µÁàÜÁ†¥",icon:"üí•",type:"dark",desc:"Â§ßÊï∏‰πòÈô§Ê∑∑Âêà",basePower:40,range:[3,12],ops:["√ó","√∑"],color:"#a855f7",bg:"#faf5ff",risky:true},
];
const POWER_CAPS=[19,23,39,60];
const HITS_PER_LVL=3;
const EFX={fire:["üî•","‚ú®","üí´"],electric:["‚ö°","‚ú®","üí•"],water:["üåä","üíß","‚ú®"],dark:["üí•","‚≠ê","üåü"],enemy:["üí¢","‚ùó"]};

function genQ(m){const{range,ops}=m;const op=ops[Math.floor(Math.random()*ops.length)];let a,b,ans,d;if(op==="√ó"){a=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];ans=a*b;d=`${a} √ó ${b}`;}else{b=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];ans=Math.floor(Math.random()*(range[1]-range[0]+1))+range[0];a=b*ans;d=`${a} √∑ ${b}`;}const ch=new Set([ans]);while(ch.size<4){const w=ans+Math.floor(Math.random()*10)-5;if(w>0&&w!==ans)ch.add(w);}return{display:d,answer:ans,choices:[...ch].sort(()=>Math.random()-0.5),op};}

// Leaderboard: localStorage persistence
const LB_KEY="mathMonsterBattle_lb";const LB_MAX=10;
function calcScore(defeated,correct,wrong,level,timed){
  const acc=(correct+wrong>0)?Math.round(correct/(correct+wrong)*100):0;
  const raw=defeated*100+acc*50+level*30;
  return Math.round(raw*(timed?1.5:1));
}
function loadScores(){try{return JSON.parse(localStorage.getItem(LB_KEY))||[];}catch(e){return[];}}
function saveScore(entry){
  const scores=loadScores();scores.push(entry);
  scores.sort((a,b)=>b.score-a.score);
  if(scores.length>LB_MAX)scores.length=LB_MAX;
  try{localStorage.setItem(LB_KEY,JSON.stringify(scores));}catch(e){}
  return scores.indexOf(entry);// rank (0-based), -1 if not in top 10
}

function MSVG({svgStr,size=120,anim="",style={}}){return<svg width={size} height={size*100/120} viewBox="0 0 120 100" style={{...style,animation:anim||"none",imageRendering:"pixelated"}}><defs><radialGradient id="gs" cx="35%" cy="25%"><stop offset="0%" stopColor="white" stopOpacity="0.5"/><stop offset="100%" stopColor="white" stopOpacity="0"/></radialGradient><filter id="glow"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g dangerouslySetInnerHTML={{__html:svgStr}}/></svg>;}

function HPBar({cur,max,color,label}){const p=Math.max(0,cur/max*100);const bc=p>50?color:p>25?"#f59e0b":"#ef4444";return<div style={{background:"rgba(0,0,0,0.65)",borderRadius:12,padding:"8px 12px",backdropFilter:"blur(8px)",border:"1px solid rgba(255,255,255,0.1)"}}><div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4}}><span style={{fontSize:12,fontWeight:800,color:"white"}}>{label}</span><span style={{fontSize:10,color:"rgba(255,255,255,0.5)",fontFamily:"'Press Start 2P',monospace"}}>{Math.max(0,Math.ceil(cur))}/{max}</span></div><div style={{height:8,background:"rgba(255,255,255,0.15)",borderRadius:4,overflow:"hidden"}}><div style={{width:`${p}%`,height:"100%",background:`linear-gradient(90deg,${bc},${bc}cc)`,borderRadius:4,transition:"width 0.6s ease"}}/></div></div>;}
function XPBar({exp,max}){const p=Math.min(100,exp/max*100);return<div style={{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden",marginTop:4}}><div style={{width:`${p}%`,height:"100%",background:"linear-gradient(90deg,#6366f1,#a855f7)",borderRadius:2,transition:"width 0.8s ease"}}/></div>;}
function Dmg({value,x,y,color,onDone}){useEffect(()=>{const t=setTimeout(onDone,1000);return()=>clearTimeout(t);},[]);return<div style={{position:"absolute",left:x,top:y,fontSize:24,fontWeight:900,color,textShadow:`0 2px 8px ${color}88`,animation:"dmgPop 1s ease forwards",pointerEvents:"none",zIndex:100,fontFamily:"'Press Start 2P',monospace"}}>{value}</div>;}
function Part({emoji,x,y,onDone}){const dx=Math.random()*80-40,dy=-(Math.random()*60+20);const[s,setS]=useState({left:x,top:y,opacity:1,transform:"scale(0)"});useEffect(()=>{requestAnimationFrame(()=>setS({left:x+dx,top:y+dy,opacity:0,transform:"scale(1.2)"}));const t=setTimeout(onDone,800);return()=>clearTimeout(t);},[]);return<div style={{position:"absolute",...s,fontSize:18,transition:"all 0.8s ease-out",pointerEvents:"none",zIndex:90}}>{emoji}</div>;}
function FireEffect({onDone}){useEffect(()=>{const t=setTimeout(onDone,900);return()=>clearTimeout(t);},[]);return<div style={{position:"absolute",inset:0,pointerEvents:"none",zIndex:80}}>
{[0,1,2].map(i=><div key={i} style={{position:"absolute",left:"15%",bottom:"40%",fontSize:28+i*6,animation:`fireballFly ${0.7+i*0.1}s ease ${i*0.1}s forwards`,opacity:0}}>üî•</div>)}
{[...Array(6)].map((_,i)=><div key={`t${i}`} style={{position:"absolute",left:`${20+i*8}%`,bottom:`${42-i*5}%`,fontSize:12+Math.random()*8,animation:`fireTrail 0.5s ease ${0.15+i*0.08}s forwards`,opacity:0}}>{"üî•‚ú®üí´"[i%3]}</div>)}
</div>;}

function ElecEffect({onDone}){useEffect(()=>{const t=setTimeout(onDone,800);return()=>clearTimeout(t);},[]);
const bolt=`M60,0 L55,30 L70,32 L50,65 L62,42 L48,40 L60,0`;
return<div style={{position:"absolute",inset:0,pointerEvents:"none",zIndex:80,animation:"lightningFlash 0.8s ease"}}>
{[0,1].map(i=><svg key={i} style={{position:"absolute",right:`${12+i*8}%`,top:`${5+i*3}%`,animation:`lightningStrike 0.5s ease ${i*0.15}s both`}} width="60" height="80" viewBox="0 0 80 70"><path d={bolt} fill={i===0?"#fbbf24":"#fde68a"} opacity={1-i*0.3}/></svg>)}
{[...Array(5)].map((_,i)=><div key={`s${i}`} style={{position:"absolute",right:`${8+Math.random()*20}%`,top:`${10+Math.random()*30}%`,fontSize:10+Math.random()*10,animation:`sparkle 0.4s ease ${0.1+i*0.1}s both`}}>‚ö°</div>)}
</div>;}

function WaterEffect({onDone}){useEffect(()=>{const t=setTimeout(onDone,1000);return()=>clearTimeout(t);},[]);return<div style={{position:"absolute",inset:0,pointerEvents:"none",zIndex:80,overflow:"hidden"}}>
<div style={{position:"absolute",right:"5%",top:"10%",width:"60%",height:40,background:"linear-gradient(90deg,transparent,rgba(59,130,246,0.5),rgba(96,165,250,0.6),rgba(59,130,246,0.3),transparent)",borderRadius:20,animation:"waterWave 0.8s ease forwards"}}/>
<div style={{position:"absolute",right:"5%",top:"18%",width:"50%",height:30,background:"linear-gradient(90deg,transparent,rgba(96,165,250,0.4),rgba(147,197,253,0.5),transparent)",borderRadius:16,animation:"waterWave 0.8s ease 0.1s forwards",opacity:0}}/>
{[...Array(8)].map((_,i)=><div key={i} style={{position:"absolute",right:`${10+i*5}%`,top:`${8+Math.random()*20}%`,fontSize:10+Math.random()*10,opacity:0,"--dx":`${-20+Math.random()*40}px`,"--dy":`${-10+Math.random()*20}px`,animation:`waterDrop 0.7s ease ${0.2+i*0.06}s forwards`}}>{"üíßüåäüí¶"[i%3]}</div>)}
</div>;}

function DarkEffect({onDone}){useEffect(()=>{const t=setTimeout(onDone,1100);return()=>clearTimeout(t);},[]);return<div style={{position:"absolute",inset:0,pointerEvents:"none",zIndex:80,animation:"darkScreenFlash 1s ease"}}>
{[0,1,2].map(i=><div key={i} style={{position:"absolute",right:"18%",top:"20%",width:60,height:60,borderRadius:"50%",animation:`darkPulse 0.7s ease ${i*0.15}s forwards`}}/>)}
{[...Array(8)].map((_,i)=><div key={`s${i}`} style={{position:"absolute",right:`${5+Math.random()*30}%`,top:`${5+Math.random()*35}%`,fontSize:14+Math.random()*14,animation:`sparkle 0.5s ease ${0.2+i*0.08}s both`}}>{"üí•‚≠êüåü‚ú®"[i%4]}</div>)}
</div>;}

function TBox({text,onClick}){return<div onClick={onClick} style={{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(to top,rgba(15,23,42,0.98),rgba(15,23,42,0.92))",borderTop:"3px solid rgba(255,255,255,0.15)",padding:"16px 20px",minHeight:70,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",zIndex:50}}><div style={{fontSize:15,fontWeight:600,color:"white",lineHeight:1.6,animation:"fadeSlide 0.3s ease"}}>{text}</div><div style={{fontSize:10,color:"rgba(255,255,255,0.3)",flexShrink:0,marginLeft:12}}>‚ñº</div></div>;}

function App(){
  const[screen,setScreen]=useState("title");const[round,setRound]=useState(0);
  const[timedMode,setTimedMode]=useState(false);
  const TIMER_SEC=5;
  const timerRef=useRef(null);const timerStartRef=useRef(null);
  const[timerLeft,setTimerLeft]=useState(TIMER_SEC);
  const[enemies]=useState(()=>{const order=[0,1,0,2,1,3,2,3,4];return order.map((idx,i)=>{const b=MONSTERS[idx];const sc=1+i*0.12;return{...b,hp:Math.round(b.hp*sc),maxHp:Math.round(b.hp*sc),atk:Math.round(b.atk*sc),lvl:i+1};});});
  const[enemy,setEnemy]=useState(null);const[eHp,setEHp]=useState(0);
  const[pHp,setPHp]=useState(100);const pMax=100;
  const[pExp,setPExp]=useState(0);const[pLvl,setPLvl]=useState(1);const[pStg,setPStg]=useState(0);
  const[streak,setStreak]=useState(0);const[charge,setCharge]=useState(0);
  const[tC,setTC]=useState(0);const[tW,setTW]=useState(0);const[defeated,setDefeated]=useState(0);
  const[mHits,setMHits]=useState([0,0,0,0]);const[mLvls,setMLvls]=useState([1,1,1,1]);const[mLvlUp,setMLvlUp]=useState(null);
  const[phase,setPhase]=useState("menu");const[selIdx,setSelIdx]=useState(null);
  const[q,setQ]=useState(null);const[fb,setFb]=useState(null);const[bText,setBText]=useState("");
  const[dmgs,setDmgs]=useState([]);const[parts,setParts]=useState([]);
  const[eAnim,setEAnim]=useState("");const[pAnim,setPAnim]=useState("");const[answered,setAnswered]=useState(false);
  const[atkEffect,setAtkEffect]=useState(null);
  const[effMsg,setEffMsg]=useState(null); // {text,color} for type effectiveness popup
  const[lastRank,setLastRank]=useState(-1);const scoreSaved=useRef(false);
  const[playerName,setPlayerName]=useState(()=>{try{return localStorage.getItem("mathMonsterBattle_name")||"";}catch(e){return"";}});
  const[nameSaved,setNameSaved]=useState(false);
  const did=useRef(0);const pid=useRef(0);
  const expNext=pLvl*30;
  const getPow=(i)=>Math.min(MOVES_BASE[i].basePower+(mLvls[i]-1)*2,POWER_CAPS[i]);
  const addD=(v,x,y,c)=>{const id=did.current++;setDmgs(f=>[...f,{id,value:v,x,y,color:c}]);};
  const rmD=id=>setDmgs(f=>f.filter(v=>v.id!==id));
  const addP=(type,x,y,n=5)=>{const es=EFX[type]||["‚ú®"];for(let i=0;i<n;i++){const id=pid.current++;setParts(p=>[...p,{id,emoji:es[Math.floor(Math.random()*es.length)],x:x+Math.random()*40-20,y:y+Math.random()*20-10}]);}};
  const rmP=id=>setParts(f=>f.filter(v=>v.id!==id));

  const SCENE_NAMES={grass:"üåø Á∂†ÊÑèËçâÂéü",fire:"üåã ÁÇéÁÜ±ÁÅ´Â±±",ghost:"üåô ÂπΩÊöóÂ¢ìÂú∞",steel:"‚öôÔ∏è ÈãºÈêµË¶ÅÂ°û",dark:"üíÄ ÊöóÈªëÊ∑±Ê∑µ"};
  const startBattle=(idx)=>{const e=enemies[idx];setEnemy(e);setEHp(e.maxHp);setRound(idx);const sn=SCENE_NAMES[e.mType]||"";setPhase("text");setBText(`„Äê${sn}„ÄëÈáéÁîüÁöÑ ${e.name} Lv.${e.lvl} Âá∫Áèæ‰∫ÜÔºÅ`);setScreen("battle");setEAnim("slideInBattle 0.6s ease");setPAnim("slideInPlayer 0.6s ease");setTimeout(()=>{setEAnim("");setPAnim("");},700);};
  const quitGame=()=>{clearTimer();setScreen("gameover");};
  // Save score when player submits name (arcade-style)
  const handleSaveScore=()=>{if(scoreSaved.current)return;scoreSaved.current=true;const comp=defeated>=enemies.length;const acc=(tC+tW>0)?Math.round(tC/(tC+tW)*100):0;const sc=calcScore(defeated,tC,tW,pLvl,timedMode);const nm=playerName.trim()||"???";try{localStorage.setItem("mathMonsterBattle_name",nm);}catch(e){}const entry={score:sc,name:nm,defeated,correct:tC,wrong:tW,accuracy:acc,level:pLvl,timed:timedMode,completed:comp,date:new Date().toISOString()};const rank=saveScore(entry);setLastRank(rank);setNameSaved(true);};
  const startGame=()=>{clearTimer();scoreSaved.current=false;setLastRank(-1);setNameSaved(false);setPHp(100);setPExp(0);setPLvl(1);setPStg(0);setStreak(0);setCharge(0);setTC(0);setTW(0);setDefeated(0);setMHits([0,0,0,0]);setMLvls([1,1,1,1]);setMLvlUp(null);setDmgs([]);setParts([]);setAtkEffect(null);setEffMsg(null);startBattle(0);};

  const onTimeoutRef=useRef(null);
  const clearTimer=()=>{if(timerRef.current){clearInterval(timerRef.current);timerRef.current=null;}};
  const startTimer=()=>{
    clearTimer();setTimerLeft(TIMER_SEC);timerStartRef.current=Date.now();
    timerRef.current=setInterval(()=>{
      const elapsed=(Date.now()-timerStartRef.current)/1000;
      const left=Math.max(0,TIMER_SEC-elapsed);
      setTimerLeft(left);
      if(left<=0){clearTimer();if(onTimeoutRef.current)onTimeoutRef.current();}
    },50);
  };

  const selectMove=(i)=>{if(phase!=="menu")return;setSelIdx(i);setQ(genQ(MOVES_BASE[i]));setFb(null);setAnswered(false);setPhase("question");if(timedMode)startTimer();};

  const onAns=(choice)=>{
    if(answered)return;setAnswered(true);clearTimer();
    const move=MOVES_BASE[selIdx];const correct=choice===q.answer;
    if(correct){
      setFb({correct:true});setTC(c=>c+1);
      const ns=streak+1;setStreak(ns);setCharge(c=>Math.min(c+1,3));
      // Move lvl
      const nh=[...mHits];nh[selIdx]++;
      const cl=mLvls[selIdx];let didLvl=false;
      if(nh[selIdx]>=HITS_PER_LVL*cl){const np=move.basePower+cl*2;if(np<=POWER_CAPS[selIdx]){const nl=[...mLvls];nl[selIdx]++;setMLvls(nl);didLvl=true;nh[selIdx]=0;setMLvlUp(selIdx);setTimeout(()=>setMLvlUp(null),2000);}}
      setMHits(nh);
      setTimeout(()=>{
        setPhase("playerAtk");setPAnim("attackLunge 0.6s ease");
        const hitAnims={fire:"enemyFireHit 0.6s ease",electric:"enemyElecHit 0.6s ease",water:"enemyWaterHit 0.7s ease",dark:"enemyDarkHit 0.8s ease"};
        const efxDelay={fire:300,electric:200,water:350,dark:400};
        setTimeout(()=>{
          setPAnim("none");
          // Show move effect overlay
          setAtkEffect(move.type);
          setTimeout(()=>{
            // Calculate damage with type effectiveness
            let dmg=didLvl?move.basePower+mLvls[selIdx]*2:getPow(selIdx);
            if(ns>=5)dmg=Math.round(dmg*1.8);else if(ns>=3)dmg=Math.round(dmg*1.5);
            dmg=Math.round(dmg*(1+pStg*0.15));
            const eff=getEff(move.type,enemy.mType);
            dmg=Math.round(dmg*eff);
            if(eff>1){setEffMsg({text:"ÊïàÊûúÁµï‰Ω≥ÔºÅ",color:"#22c55e"});setTimeout(()=>setEffMsg(null),1500);}
            else if(eff<1){setEffMsg({text:"ÊïàÊûú‰∏çÂ•Ω...",color:"#94a3b8"});setTimeout(()=>setEffMsg(null),1500);}
            const newHp=Math.max(0,eHp-dmg);setEHp(newHp);
            // Move-specific hit animation
            setEAnim(hitAnims[move.type]||"enemyHit 0.5s ease");
            const dmgColor={fire:"#ef4444",electric:"#fbbf24",water:"#3b82f6",dark:"#a855f7"}[move.type]||"#ef4444";
            addD(`-${dmg}`,140,55,dmgColor);
            setTimeout(()=>{setEAnim("");setAtkEffect(null);},800);
            if(newHp<=0){setTimeout(()=>{
              const xp=enemy.lvl*15;setPExp(prev=>{const ne=prev+xp;if(ne>=expNext){setPLvl(l=>l+1);setPHp(h=>Math.min(h+20,pMax));if(pStg<2&&(pLvl+1)%3===0)setTimeout(()=>{setPStg(s=>Math.min(s+1,2));setScreen("evolve");},1500);return ne-expNext;}return ne;});
              setDefeated(d=>d+1);const drop=enemy.drops[Math.floor(Math.random()*enemy.drops.length)];
              setBText(`${enemy.name} Ë¢´ÊâìÂÄí‰∫ÜÔºÅÁç≤Âæó ${xp} Á∂ìÈ©óÂÄº ${drop}`);setPhase("victory");
            },900);}else setTimeout(()=>enemyTurn(),900);
          },efxDelay[move.type]||300);
        },400);
      },600);
    } else {
      setFb({correct:false,answer:q.answer});setTW(w=>w+1);setStreak(0);setCharge(0);
      setTimeout(()=>{
        if(move.risky){const sd=Math.round(getPow(selIdx)*0.4);const nh=Math.max(0,pHp-sd);setPHp(nh);setPAnim("playerHit 0.5s ease");addD(`-${sd}`,40,170,"#ef4444");setTimeout(()=>setPAnim("none"),500);setBText(`${move.name} Â§±Êéß‰∫ÜÔºÅËá™Â∑±ÂèóÂà∞ ${sd} ÂÇ∑ÂÆ≥ÔºÅ`);setPhase("text");setTimeout(()=>{if(nh<=0){setPhase("ko");setBText("‰Ω†ÁöÑÂ§•‰º¥ÂÄí‰∏ã‰∫Ü...");setScreen("gameover");}else enemyTurn();},1500);}
        else{setBText("ÊîªÊìäËêΩÁ©∫‰∫ÜÔºÅ");setPhase("text");setTimeout(()=>enemyTurn(),1200);}
      },1000);
    }
  };

  const enemyTurn=()=>{if(!enemy)return;setBText(`${enemy.name} ÁôºÂãïÊîªÊìäÔºÅ`);setPhase("enemyAtk");setEAnim("enemyAttackLunge 0.6s ease");
    setTimeout(()=>{setEAnim("");const dmg=Math.round(enemy.atk*(0.8+Math.random()*0.4));const nh=Math.max(0,pHp-dmg);setPHp(nh);setPAnim("playerHit 0.5s ease");addD(`-${dmg}`,60,170,"#ef4444");addP("enemy",80,190,4);setTimeout(()=>setPAnim("none"),500);
    if(nh<=0)setTimeout(()=>{setPhase("ko");setBText("‰Ω†ÁöÑÂ§•‰º¥ÂÄí‰∏ã‰∫Ü...");setScreen("gameover");},800);else setTimeout(()=>{setPhase("menu");setBText("");},800);},500);};

  // Timeout handler for timed mode
  const onTimeout=()=>{
    setAnswered(true);setFb({correct:false,answer:q?.answer});setTW(w=>w+1);setStreak(0);setCharge(0);
    setBText("‚è∞ ÊôÇÈñìÂà∞ÔºÅ‰æÜ‰∏çÂèäÂá∫ÊãõÔºÅ");setPhase("text");
    setTimeout(()=>enemyTurn(),1200);
  };
  // Keep ref updated with latest closure
  useEffect(()=>{onTimeoutRef.current=onTimeout;});
  // Cleanup timer on unmount or phase change away from question
  useEffect(()=>{if(phase!=="question")clearTimer();},[phase]);

  const advance=()=>{if(phase==="text"){setPhase("menu");setBText("");}else if(phase==="victory"){const nx=round+1;if(nx>=enemies.length){setScreen("gameover");}else{setPHp(h=>Math.min(h+10,pMax));startBattle(nx);}}};

  if(screen==="title")return(
    <div style={{height:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(180deg,#0f172a 0%,#1e1b4b 40%,#312e81 100%)",color:"white",padding:24,textAlign:"center",position:"relative",overflow:"hidden"}}>
      <div style={{position:"absolute",top:"8%",left:"12%",fontSize:40,opacity:0.12,animation:"sparkle 3s ease infinite"}}>‚≠ê</div>
      <div style={{position:"absolute",top:"18%",right:"18%",fontSize:30,opacity:0.08,animation:"sparkle 4s ease 1s infinite"}}>‚ú®</div>
      <div style={{marginBottom:16,animation:"float 3s ease-in-out infinite"}}><MSVG svgStr={pStage2(PLAYER.c1,PLAYER.c2)} size={150}/></div>
      <h1 style={{fontSize:32,fontWeight:900,marginBottom:4,letterSpacing:2,textShadow:"0 0 30px rgba(99,102,241,0.5)"}}>Êï∏Â≠∏ÂØ∂ÂèØÂ§¢</h1>
      <h2 style={{fontSize:18,fontWeight:700,marginBottom:8,opacity:0.6}}>Math Monster Battle</h2>
      <p style={{fontSize:13,opacity:0.4,marginBottom:28,lineHeight:1.7}}>ÈÅ∏ÊìáÊãõÂºè ‚Üí ÂõûÁ≠îÊï∏Â≠∏È°å ‚Üí ÊâìÂÄíÊÄ™Áç∏ÔºÅ<br/>ÊåÅÁ∫å‰ΩøÁî®Âêå‰∏ÄÊãõÂºèÂèØ‰ª•ÂçáÁ¥öÂ®ÅÂäõ üî•<br/>ÈÄ£Á∫åÁ≠îÂ∞çËìÑÂäõÂøÖÊÆ∫ÊäÄ üí™</p>
      <div style={{display:"flex",gap:10,marginBottom:12}}>
        <button onClick={()=>{setTimedMode(false);startGame();}} style={{background:"linear-gradient(135deg,#6366f1,#a855f7)",border:"none",color:"white",fontSize:17,fontWeight:800,padding:"14px 28px",borderRadius:50,boxShadow:"0 4px 24px rgba(99,102,241,0.4)",letterSpacing:1}}>‚öîÔ∏è ‰∏ÄËà¨Ê®°Âºè</button>
        <button onClick={()=>{setTimedMode(true);startGame();}} style={{background:"linear-gradient(135deg,#ef4444,#f59e0b)",border:"none",color:"white",fontSize:17,fontWeight:800,padding:"14px 28px",borderRadius:50,boxShadow:"0 4px 24px rgba(239,68,68,0.4)",letterSpacing:1}}>‚è±Ô∏è Ë®àÊôÇÊ®°Âºè</button>
      </div>
      <div style={{fontSize:11,opacity:0.3,marginBottom:8}}>Ë®àÊôÇÊ®°ÂºèÔºö5ÁßíÂÖßÂõûÁ≠îÔºåÂê¶ÂâáÊÄ™Áç∏Êê∂ÂÖàÊîªÊìäÔºÅ</div>
      <button onClick={()=>setScreen("leaderboard")} style={{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.15)",color:"white",fontSize:14,fontWeight:600,padding:"8px 24px",borderRadius:50,marginTop:8}}>üèÜ ÊéíË°åÊ¶ú</button>
      <div style={{display:"flex",gap:16,marginTop:16,fontSize:12,opacity:0.3}}><div>üî• ‰πòÊ≥ï</div><div>üåä Èô§Ê≥ï</div><div>üí• Ê∑∑Âêà</div><div>‚ö° ‰πù‰πù</div></div>
      <div style={{marginTop:36,opacity:0.25,fontSize:11,lineHeight:1.8}}><div>Ë®≠Ë®àÔºöChung-Han Hsieh</div><div style={{fontSize:10}}>‚úâÔ∏è ch.hsieh@mx.nthu.edu.tw</div><div>Á®ãÂºèÂØ¶‰ΩúÔºöÁî± Claude (Anthropic) ÂçîÂä©ÁîüÊàê</div></div>
    </div>
  );

  if(screen==="leaderboard"){const scores=loadScores();return(
    <div style={{height:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",background:"linear-gradient(180deg,#0f172a 0%,#1e1b4b 40%,#312e81 100%)",color:"white",padding:24,overflow:"auto"}}>
      <div style={{fontSize:36,marginBottom:4,marginTop:16}}>üèÜ</div>
      <h2 style={{fontSize:22,fontWeight:900,marginBottom:16,letterSpacing:1}}>ÊéíË°åÊ¶ú</h2>
      {scores.length===0?<div style={{opacity:0.4,fontSize:14,marginTop:40}}>Â∞öÁÑ°Á¥ÄÈåÑÔºåÂø´ÂéªÊåëÊà∞ÂêßÔºÅ</div>:
      <div style={{width:"100%",maxWidth:340}}>
        {scores.map((s,i)=>{const d=new Date(s.date);const ds=`${d.getMonth()+1}/${d.getDate()}`;
        return<div key={i} style={{display:"flex",alignItems:"center",gap:10,background:i===0?"rgba(251,191,36,0.12)":i===1?"rgba(192,192,192,0.08)":i===2?"rgba(205,127,50,0.08)":"rgba(255,255,255,0.04)",borderRadius:12,padding:"10px 14px",marginBottom:6,border:`1px solid ${i===0?"rgba(251,191,36,0.25)":i<3?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)"}`,animation:`fadeSlide 0.3s ease ${i*0.05}s both`}}>
          <div style={{width:28,fontSize:i<3?20:14,textAlign:"center",fontWeight:900,color:i===0?"#fbbf24":i===1?"#c0c0c0":i===2?"#cd7f32":"rgba(255,255,255,0.4)"}}>{i<3?["ü•á","ü•à","ü•â"][i]:`${i+1}`}</div>
          <div style={{flex:1,minWidth:0}}>
            <div style={{fontSize:11,fontWeight:700,color:"rgba(255,255,255,0.85)",marginBottom:1}}>{s.name||"???"}</div>
            <div style={{display:"flex",alignItems:"center",gap:6}}>
              <span style={{fontSize:18,fontWeight:900,color:"#fbbf24",fontFamily:"'Press Start 2P',monospace"}}>{s.score}</span>
              {s.timed&&<span style={{fontSize:9,background:"rgba(239,68,68,0.3)",padding:"1px 6px",borderRadius:8,fontWeight:700}}>‚è±Ô∏è</span>}
              {s.completed&&<span style={{fontSize:9,background:"rgba(34,197,94,0.3)",padding:"1px 6px",borderRadius:8,fontWeight:700}}>üëë</span>}
            </div>
            <div style={{fontSize:10,opacity:0.5,marginTop:2}}>ÊÄ™Áç∏ {s.defeated}/{enemies.length} ¬∑ Ê≠£Á¢∫Áéá {s.accuracy}% ¬∑ Lv.{s.level}</div>
          </div>
          <div style={{fontSize:10,opacity:0.3,flexShrink:0}}>{ds}</div>
        </div>;})}
      </div>}
      <button onClick={()=>setScreen("title")} style={{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontSize:14,fontWeight:600,padding:"10px 28px",borderRadius:50,marginTop:20}}>üè† ËøîÂõû‰∏ªÁï´Èù¢</button>
    </div>
  );}

  if(screen==="evolve"){const st=PLAYER.stages[pStg];const ECOLORS=["#818cf8","#a855f7","#fbbf24","#22c55e","#60a5fa","#f472b6","#fb923c","#34d399","#c084fc","#facc15"];return(
    <div style={{height:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(270deg,#0f0520,#1e1b4b,#312e81,#1e1b4b,#0f0520)",backgroundSize:"400% 400%",animation:"bgShimmer 6s ease infinite",color:"white",padding:24,textAlign:"center",position:"relative",overflow:"hidden"}}>
      <div style={{position:"absolute",inset:0,background:"white",animation:"evolveFlash 1.8s ease forwards",zIndex:100,pointerEvents:"none"}}/>
      {[0,0.3,0.6].map((dl,i)=><div key={"br"+i} style={{position:"absolute",left:"50%",top:"42%",width:60,height:60,marginLeft:-30,marginTop:-30,borderRadius:"50%",border:"3px solid",borderColor:["rgba(99,102,241,0.6)","rgba(168,85,247,0.5)","rgba(251,191,36,0.4)"][i],animation:`colorBurst 1.8s ease ${dl}s forwards`,pointerEvents:"none"}}/>)}
      {Array.from({length:12},(_,i)=><div key={"op"+i} style={{position:"absolute",left:"50%",top:"42%",width:0,height:0,animation:`evolveSpin ${2.2+i*0.25}s linear ${i*0.12}s infinite`,zIndex:50,"--orbit":`${45+i*7}px`}}><div style={{width:4+i%3*2,height:4+i%3*2,borderRadius:"50%",background:ECOLORS[i%10],boxShadow:`0 0 ${6+i*2}px ${ECOLORS[i%10]}`,opacity:0.85}}/></div>)}
      {Array.from({length:8},(_,i)=><div key={"ss"+i} style={{position:"absolute",left:`${12+Math.sin(i*1.3)*32+32}%`,top:`${8+Math.cos(i*1.7)*32+32}%`,fontSize:12+i%3*8,animation:`sparkle ${1.5+i*0.2}s ease ${0.3+i*0.25}s infinite`,zIndex:50,pointerEvents:"none"}}>{i%2===0?"‚ú®":"‚≠ê"}</div>)}
      <div style={{position:"relative",zIndex:60}}>
        <div style={{fontSize:20,fontWeight:700,opacity:0.8,marginBottom:16,animation:"fadeSlide 0.5s ease 0.8s both",textShadow:"0 0 20px rgba(168,85,247,0.5)"}}>ÊÅ≠ÂñúÔºÅ‰Ω†ÁöÑÂ§•‰º¥ÈÄ≤Âåñ‰∫ÜÔºÅ</div>
        <div style={{fontSize:56,marginBottom:8,animation:"popIn 0.6s ease 1s both",filter:"drop-shadow(0 0 12px rgba(251,191,36,0.5))"}}>{st.emoji}</div>
        <div style={{animation:"growIn 1.2s ease 0.4s both",marginBottom:16}}><div style={{animation:"evolveGlow 2s ease 1.5s infinite"}}><MSVG svgStr={st.svgFn(PLAYER.c1,PLAYER.c2)} size={180}/></div></div>
        <div style={{fontSize:32,fontWeight:900,animation:"fadeSlide 0.5s ease 1.3s both",marginBottom:6,textShadow:"0 0 20px rgba(168,85,247,0.5)",letterSpacing:2}}>{st.name}</div>
        <div style={{fontSize:14,opacity:0.6,marginBottom:32,animation:"fadeSlide 0.3s ease 1.6s both"}}>ÊîªÊìäÂäõÊèêÂçáÔºÅÁîüÂëΩÊÅ¢Âæ©ÔºÅ</div>
        <button onClick={()=>{setScreen("battle");setPhase("menu");setBText("");}} style={{background:"linear-gradient(135deg,#6366f1,#a855f7)",border:"none",color:"white",fontSize:16,fontWeight:700,padding:"14px 40px",borderRadius:50,boxShadow:"0 4px 24px rgba(99,102,241,0.5)",animation:"fadeSlide 0.3s ease 1.9s both",position:"relative",zIndex:70}}>ÁπºÁ∫åÊà∞È¨•ÔºÅ</button>
      </div>
    </div>
  );}

  if(screen==="gameover"){const won=defeated>=enemies.length;const finalScore=calcScore(defeated,tC,tW,pLvl,timedMode);return(
    <div style={{height:"100dvh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:won?"linear-gradient(180deg,#1e1b4b,#312e81,#4338ca)":"linear-gradient(180deg,#1e1b4b,#1a0a2e,#0f0520)",color:"white",padding:24,textAlign:"center"}}>
      <div style={{fontSize:64,marginBottom:8,animation:"popIn 0.5s ease"}}>{won?"üèÜ":"üíÄ"}</div>
      <h2 style={{fontSize:26,fontWeight:900,marginBottom:4}}>{won?"ÊÅ≠ÂñúÈÄöÈóúÔºÅ":"ÊåëÊà∞ÁµêÊùü"}{timedMode&&<span style={{fontSize:13,fontWeight:700,background:"rgba(239,68,68,0.3)",padding:"2px 10px",borderRadius:12,marginLeft:8,verticalAlign:"middle"}}>‚è±Ô∏è Ë®àÊôÇ</span>}</h2>
      <div style={{marginBottom:12,animation:"popIn 0.4s ease 0.2s both"}}>
        <div style={{fontSize:13,opacity:0.5,marginBottom:2}}>ÂæóÂàÜ</div>
        <div style={{fontSize:32,fontWeight:900,color:"#fbbf24",fontFamily:"'Press Start 2P',monospace",textShadow:"0 0 20px rgba(251,191,36,0.4)"}}>{finalScore}</div>
        {lastRank>=0&&lastRank<3&&<div style={{fontSize:12,color:"#fbbf24",fontWeight:700,marginTop:2,animation:"popIn 0.3s ease 0.5s both"}}>{["ü•á Êñ∞Á¥ÄÈåÑÔºÅÁ¨¨1ÂêçÔºÅ","ü•à Á¨¨2ÂêçÔºÅ","ü•â Á¨¨3ÂêçÔºÅ"][lastRank]}</div>}
        {lastRank>=3&&<div style={{fontSize:12,opacity:0.5,marginTop:2}}>ÊéíË°åÊ¶úÁ¨¨ {lastRank+1} Âêç</div>}
      </div>
      {!nameSaved?<div style={{marginBottom:12,animation:"popIn 0.3s ease 0.4s both"}}><div style={{fontSize:13,opacity:0.5,marginBottom:6}}>Ëº∏ÂÖ•‰Ω†ÁöÑÂêçÂ≠ó</div><div style={{display:"flex",gap:8,justifyContent:"center",alignItems:"center"}}><input value={playerName} onChange={e=>setPlayerName(e.target.value)} placeholder="???" maxLength={8} style={{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:10,color:"white",fontSize:16,fontWeight:700,padding:"8px 12px",textAlign:"center",width:140,outline:"none"}} onKeyDown={e=>{if(e.key==="Enter")handleSaveScore();}}/><button onClick={handleSaveScore} style={{background:"linear-gradient(135deg,#22c55e,#16a34a)",border:"none",color:"white",fontSize:14,fontWeight:700,padding:"10px 20px",borderRadius:50}}>ÂÑ≤Â≠ò</button></div></div>:<div style={{marginBottom:12,fontSize:12,color:"#22c55e",fontWeight:700,animation:"popIn 0.3s ease"}}>‚úÖ Â∑≤ÂÑ≤Â≠òÔºÅ</div>}
      <div style={{background:"rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:12,minWidth:260,border:"1px solid rgba(255,255,255,0.1)"}}>
        <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,fontSize:14}}>
          <div style={{textAlign:"center"}}><div style={{fontSize:28,fontWeight:900,color:"#22c55e"}}>{tC}</div><div style={{opacity:0.5,fontSize:12}}>Á≠îÂ∞ç</div></div>
          <div style={{textAlign:"center"}}><div style={{fontSize:28,fontWeight:900,color:"#ef4444"}}>{tW}</div><div style={{opacity:0.5,fontSize:12}}>Á≠îÈåØ</div></div>
          <div style={{textAlign:"center"}}><div style={{fontSize:28,fontWeight:900,color:"#f59e0b"}}>{defeated}</div><div style={{opacity:0.5,fontSize:12}}>ÊâìÂÄíÊÄ™Áç∏</div></div>
          <div style={{textAlign:"center"}}><div style={{fontSize:28,fontWeight:900,color:"#a855f7"}}>Lv.{pLvl}</div><div style={{opacity:0.5,fontSize:12}}>ÊúÄÁµÇÁ≠âÁ¥ö</div></div>
        </div>
        <div style={{marginTop:12,fontSize:13,opacity:0.5}}>Ê≠£Á¢∫ÁéáÔºö{tC+tW>0?Math.round(tC/(tC+tW)*100):0}%</div>
      </div>
      <div style={{background:"rgba(255,255,255,0.05)",borderRadius:12,padding:"12px 16px",marginBottom:16,minWidth:260,border:"1px solid rgba(255,255,255,0.06)"}}>
        <div style={{fontSize:12,opacity:0.4,marginBottom:8}}>ÊãõÂºèÁ≠âÁ¥ö</div>
        <div style={{display:"flex",gap:10,justifyContent:"center"}}>{MOVES_BASE.map((m,i)=><div key={i} style={{textAlign:"center"}}><div style={{fontSize:18}}>{m.icon}</div><div style={{fontSize:11,fontWeight:700,color:m.color}}>Lv.{mLvls[i]}</div><div style={{fontSize:10,opacity:0.4}}>Â®ÅÂäõ{getPow(i)}</div></div>)}</div>
      </div>
      <div style={{display:"flex",gap:10}}>
        <button onClick={startGame} style={{background:"linear-gradient(135deg,#6366f1,#a855f7)",border:"none",color:"white",fontSize:16,fontWeight:700,padding:"12px 32px",borderRadius:50}}>üîÑ ÂÜçÊåëÊà∞</button>
        <button onClick={()=>setScreen("leaderboard")} style={{background:"linear-gradient(135deg,#f59e0b,#ef4444)",border:"none",color:"white",fontSize:14,fontWeight:700,padding:"12px 24px",borderRadius:50}}>üèÜ ÊéíË°åÊ¶ú</button>
        <button onClick={()=>setScreen("title")} style={{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"white",fontSize:14,fontWeight:600,padding:"12px 20px",borderRadius:50}}>üè†</button>
      </div>
    </div>
  );}

  if(!enemy)return null;
  const st=PLAYER.stages[pStg];const eSvg=enemy.svgFn(enemy.c1,enemy.c2);const pSvg=st.svgFn(PLAYER.c1,PLAYER.c2);const chargeReady=charge>=3;
  const scene=SCENES[enemy.mType]||SCENES.grass;

  return(
    <div style={{height:"100dvh",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}}>
      {dmgs.map(d=><Dmg key={d.id} value={d.value} x={d.x} y={d.y} color={d.color} onDone={()=>rmD(d.id)}/>)}
      {parts.map(p=><Part key={p.id} emoji={p.emoji} x={p.x} y={p.y} onDone={()=>rmP(p.id)}/>)}
      {mLvlUp!==null&&<div style={{position:"absolute",top:60,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg,rgba(251,191,36,0.9),rgba(245,158,11,0.9))",color:"white",padding:"6px 18px",borderRadius:20,fontSize:13,fontWeight:700,zIndex:200,animation:"popIn 0.3s ease",boxShadow:"0 4px 16px rgba(245,158,11,0.4)",whiteSpace:"nowrap"}}>{MOVES_BASE[mLvlUp].icon} {MOVES_BASE[mLvlUp].name} ÂçáÁ¥öÂà∞ Lv.{mLvls[mLvlUp]}ÔºÅÂ®ÅÂäõ ‚Üí {getPow(mLvlUp)}</div>}

      {/* Move-specific attack effects */}
      {atkEffect==="fire"&&<FireEffect onDone={()=>setAtkEffect(null)}/>}
      {atkEffect==="electric"&&<ElecEffect onDone={()=>setAtkEffect(null)}/>}
      {atkEffect==="water"&&<WaterEffect onDone={()=>setAtkEffect(null)}/>}
      {atkEffect==="dark"&&<DarkEffect onDone={()=>setAtkEffect(null)}/>}

      {/* Type effectiveness popup */}
      {effMsg&&<div style={{position:"absolute",top:"38%",left:"50%",transform:"translateX(-50%)",background:effMsg.color==="#22c55e"?"linear-gradient(135deg,rgba(34,197,94,0.95),rgba(22,163,74,0.95))":"linear-gradient(135deg,rgba(100,116,139,0.9),rgba(71,85,105,0.9))",color:"white",padding:"6px 20px",borderRadius:20,fontSize:14,fontWeight:800,zIndex:200,animation:"popIn 0.3s ease",boxShadow:`0 4px 16px ${effMsg.color}44`,letterSpacing:1}}>{effMsg.text}</div>}

      <div style={{flex:1,position:"relative",minHeight:0,background:"#111",transition:"background 1s ease"}}>{scene.bgImg&&<div className="scene-bg" style={{backgroundImage:`url(${scene.bgImg})`}}/>}<div style={{position:"absolute",inset:0,background:scene.sky,opacity:0.25,zIndex:1,transition:"background 1s ease"}}/>
        <div style={{position:"absolute",bottom:0,left:0,right:0,height:"45%",background:scene.ground,transition:"background 1s ease",zIndex:2}}/>
        <div style={{position:"absolute",right:"5%",top:"8%",width:"55%",height:12,background:scene.platform2,borderRadius:"50%",filter:"blur(2px)",transition:"background 0.8s ease",zIndex:3}}/>
        <div style={{position:"absolute",top:10,left:10,right:"42%",zIndex:10}}>
          <HPBar cur={eHp} max={enemy.maxHp} color={enemy.c1} label={`${enemy.typeIcon}${enemy.name} Lv.${enemy.lvl}`}/>
        </div>
        <div style={{position:"absolute",right:"10%",top:"12%",zIndex:5,animation:eAnim||"float 3s ease-in-out infinite"}}><MSVG svgStr={eSvg} size={120}/></div>
        <div style={{position:"absolute",left:"2%",bottom:"12%",width:"50%",height:10,background:scene.platform1,borderRadius:"50%",filter:"blur(2px)",transition:"background 0.8s ease",zIndex:3}}/>
        <div style={{position:"absolute",bottom:10,right:10,left:"42%",zIndex:10}}><HPBar cur={pHp} max={pMax} color="#6366f1" label={`${st.name} Lv.${pLvl}`}/><XPBar exp={pExp} max={expNext}/></div>
        <div style={{position:"absolute",left:"6%",bottom:"14%",transform:"scaleX(-1)",zIndex:5,animation:pAnim||(phase==="menu"?"floatFlip 3s ease-in-out infinite":"none")}}><MSVG svgStr={pSvg} size={110}/></div>
        {streak>=2&&<div style={{position:"absolute",top:10,right:10,background:"linear-gradient(135deg,#f59e0b,#ef4444)",color:"white",padding:"3px 10px",borderRadius:16,fontSize:11,fontWeight:700,animation:"popIn 0.3s ease",zIndex:20}}>üî• {streak} ÈÄ£ÊìäÔºÅ</div>}
        {timedMode&&streak<2&&<div style={{position:"absolute",top:10,right:10,background:"rgba(239,68,68,0.7)",color:"white",padding:"3px 8px",borderRadius:12,fontSize:10,fontWeight:700,zIndex:20,backdropFilter:"blur(4px)"}}>‚è±Ô∏è Ë®àÊôÇ</div>}
        <div style={{position:"absolute",bottom:50,left:10,display:"flex",gap:4,zIndex:20,background:"rgba(0,0,0,0.3)",padding:"3px 8px",borderRadius:10,backdropFilter:"blur(4px)"}}>
          {[0,1,2].map(i=><div key={i} style={{width:11,height:11,borderRadius:6,background:i<charge?"#f59e0b":"rgba(0,0,0,0.15)",border:"2px solid rgba(255,255,255,0.4)",transition:"all 0.3s",animation:i<charge?"chargeGlow 1.5s ease infinite":"none"}}/>)}
          {chargeReady&&<span style={{fontSize:9,color:"#b45309",fontWeight:700,marginLeft:2,animation:"popIn 0.3s ease"}}>MAX!</span>}
        </div>
      </div>

      <div style={{background:"linear-gradient(to top,#0f172a,#1e293b)",borderTop:"3px solid rgba(255,255,255,0.1)",flexShrink:0,minHeight:phase==="question"?210:170,position:"relative"}}>
        {phase==="menu"&&<div style={{padding:10}}><div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:7}}>
          {MOVES_BASE.map((m,i)=>{const locked=m.risky&&!chargeReady;const lv=mLvls[i];const pw=getPow(i);const atCap=m.basePower+lv*2>POWER_CAPS[i];const eff=enemy?getEff(m.type,enemy.mType):1;
          return<button key={i} onClick={()=>!locked&&selectMove(i)} style={{background:locked?"rgba(255,255,255,0.03)":eff>1?`linear-gradient(135deg,${m.bg},rgba(34,197,94,0.08))`:eff<1?`linear-gradient(135deg,${m.bg},rgba(148,163,184,0.08))`:m.bg,border:`2px solid ${locked?"rgba(255,255,255,0.08)":eff>1?"#22c55e66":m.color+"44"}`,borderRadius:12,padding:"10px 10px",textAlign:"left",opacity:locked?0.4:1,cursor:locked?"default":"pointer",transition:"all 0.2s",animation:`fadeSlide 0.3s ease ${i*0.05}s both`,position:"relative",overflow:"hidden"}}>
            {lv>1&&<div style={{position:"absolute",top:4,right:eff!==1?40:6,background:atCap?"linear-gradient(135deg,#f59e0b,#ef4444)":m.color,color:"white",fontSize:8,fontWeight:800,padding:"1px 5px",borderRadius:8,fontFamily:"'Press Start 2P',monospace"}}>Lv{lv}</div>}
            {eff>1&&<div style={{position:"absolute",top:4,right:6,background:"#22c55e",color:"white",fontSize:8,fontWeight:800,padding:"1px 5px",borderRadius:8}}>ÊïàÊûú‚Üë</div>}
            {eff<1&&<div style={{position:"absolute",top:4,right:6,background:"#64748b",color:"white",fontSize:8,fontWeight:800,padding:"1px 5px",borderRadius:8}}>ÊïàÊûú‚Üì</div>}
            <div style={{display:"flex",alignItems:"center",gap:5,marginBottom:2}}><span style={{fontSize:16}}>{m.icon}</span><span style={{fontSize:13,fontWeight:700,color:locked?"#64748b":m.color}}>{m.name}</span></div>
            <div style={{fontSize:10,color:locked?"#475569":"#64748b"}}>{m.desc} ¬∑ Â®ÅÂäõ <b style={{color:lv>1?m.color:"inherit"}}>{pw}</b>{eff>1?" √ó1.5":eff<1?" √ó0.6":""}{m.risky&&!chargeReady&&" üîí"}{m.risky&&chargeReady&&" ‚ö°ËìÑÂäõÂÆåÊàêÔºÅ"}{!m.risky&&!atCap&&lv>1&&" ‚Üë"}{atCap&&" ‚ú¶MAX"}</div>
            {!m.risky&&!atCap&&<div style={{height:3,background:"rgba(0,0,0,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"}}><div style={{width:`${(mHits[i]%(HITS_PER_LVL*mLvls[i]))/(HITS_PER_LVL*mLvls[i])*100}%`,height:"100%",background:m.color,borderRadius:2,transition:"width 0.3s"}}/></div>}
          </button>;})}
        </div><div style={{display:"flex",justifyContent:"flex-end",marginTop:6}}><button onClick={quitGame} style={{background:"none",border:"1px solid rgba(255,255,255,0.12)",color:"rgba(255,255,255,0.35)",fontSize:11,fontWeight:600,padding:"4px 12px",borderRadius:16,cursor:"pointer"}}>üè≥Ô∏è ÈÄÉË∑ë</button></div></div>}

        {phase==="question"&&q&&<div style={{padding:"10px 14px",animation:"fadeSlide 0.25s ease"}}>
          <div style={{display:"flex",alignItems:"center",gap:6,marginBottom:8}}><span style={{fontSize:14}}>{MOVES_BASE[selIdx].icon}</span><span style={{fontSize:13,fontWeight:700,color:"white"}}>{MOVES_BASE[selIdx].name}ÔºÅ</span><span style={{fontSize:11,color:"rgba(255,255,255,0.35)"}}>{timedMode?"‚è±Ô∏è ÈôêÊôÇÂõûÁ≠îÔºÅ":"ÂõûÁ≠îÊ≠£Á¢∫ÊâçËÉΩÂëΩ‰∏≠"}</span></div>
          <div style={{background:"rgba(255,255,255,0.08)",borderRadius:12,padding:"10px 16px",textAlign:"center",marginBottom:8,border:"1px solid rgba(255,255,255,0.1)",position:"relative",overflow:"hidden"}}>
            {timedMode&&!answered&&<div style={{position:"absolute",bottom:0,left:0,height:4,background:timerLeft<=1.5?"#ef4444":timerLeft<=3?"#f59e0b":"#22c55e",width:`${(timerLeft/TIMER_SEC)*100}%`,borderRadius:2,transition:"width 0.05s linear,background 0.3s",animation:timerLeft<=1.5?"timerPulse 0.4s ease infinite":"none"}}/>}
            <div style={{fontSize:10,color:"rgba(255,255,255,0.35)",marginBottom:2}}>{q.op==="√ó"?"‰πòÊ≥ïÈ°å":"Èô§Ê≥ïÈ°å"}</div>
            <div style={{fontSize:30,fontWeight:900,color:"white",letterSpacing:2}}>{q.display} = ?</div>
            {timedMode&&!answered&&<div style={{fontSize:11,fontWeight:700,color:timerLeft<=1.5?"#ef4444":timerLeft<=3?"#f59e0b":"rgba(255,255,255,0.4)",marginTop:2,fontFamily:"'Press Start 2P',monospace",transition:"color 0.3s"}}>{timerLeft.toFixed(1)}s</div>}
          </div>
          {fb&&<div style={{textAlign:"center",marginBottom:4,fontSize:13,fontWeight:700,color:fb.correct?"#22c55e":"#ef4444",animation:"popIn 0.2s ease"}}>{fb.correct?"‚úÖ ÂëΩ‰∏≠ÔºÅ":`‚ùå Á≠îÊ°àÊòØ ${fb.answer}`}</div>}
          <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:7}}>
            {q.choices.map((c,i)=>{let bg="rgba(255,255,255,0.08)",bd="rgba(255,255,255,0.15)",co="white";if(fb){if(c===q.answer){bg="rgba(34,197,94,0.2)";bd="#22c55e";co="#22c55e";}else{bg="rgba(255,255,255,0.03)";co="rgba(255,255,255,0.3)";}}return<button key={i} onClick={()=>onAns(c)} disabled={answered} style={{background:bg,border:`2px solid ${bd}`,borderRadius:10,padding:"10px 8px",fontSize:20,fontWeight:700,color:co,transition:"all 0.2s"}}>{c}</button>;})}
          </div>
        </div>}

        {(phase==="text"||phase==="playerAtk"||phase==="enemyAtk"||phase==="victory"||phase==="ko")&&<TBox text={bText} onClick={advance}/>}
      </div>
    </div>
  );
}
ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
<script>if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}</script>
</body>
</html>
